
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Os-http - jamielennox.net</title>
  <meta name="author" content="Jamie Lennox">

  
  <meta name="description" content="Background Frequently doing OpenStack development I find myself wanting to query an API directly and observe the response.
This is a fairly common &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.jamielennox.net/blog/2016/04/12/os-http">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="jamielennox.net" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44372550-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">jamielennox.net</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
<ul class="subscribe">
  <li><a href="https://github.com/jamielennox" rel="subscribe-github" title="@jamielennox on GitHub" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 50,0 C 22.385714,0 0,22.385714 0,50 0,77.614286 22.385714,100 50,100 77.614286,100 100,77.614286 100,50 100,22.385714 77.614286,0 50,0 z m 29.692858,79.692858 c -3.859184,3.859182 -8.351022,6.887754 -13.35,9.00306 -1.27041,0.536736 -2.560204,1.009184 -3.867348,1.415306 v -7.493878 c 0,-3.938774 -1.35102,-6.835714 -4.053062,-8.690816 1.692858,-0.163264 3.24694,-0.390816 4.663266,-0.683672 1.416326,-0.292858 2.913266,-0.716328 4.491838,-1.27041 1.57857,-0.55408 2.994896,-1.213264 4.247958,-1.97755 1.253062,-0.765306 2.458164,-1.758164 3.613266,-2.978572 1.155102,-1.220408 2.12449,-2.604082 2.905102,-4.15 0.780612,-1.545918 1.4,-3.40204 1.855102,-5.566326 0.455102,-2.164286 0.683674,-4.54898 0.683674,-7.153062 0,-5.045918 -1.643878,-9.341836 -4.931634,-12.890816 C 77.44796,33.35 77.285714,29.10204 75.463266,24.512244 l -1.22143,-0.145918 c -0.845918,-0.09796 -2.368366,0.260204 -4.565306,1.07449 -2.196938,0.814286 -4.663264,2.14796 -7.396938,4.004082 -3.87449,-1.07449 -7.893878,-1.611224 -12.061224,-1.611224 -4.19898,0 -8.203062,0.536734 -12.012246,1.611224 -1.72449,-1.17245 -3.361224,-2.139796 -4.907142,-2.905102 C 31.753062,25.77449 30.516326,25.254082 29.587756,24.97653 28.660204,24.7 27.79796,24.528572 27,24.463266 c -0.79796,-0.0653 -1.310204,-0.08062 -1.537756,-0.04898 -0.22755,0.03164 -0.390816,0.0653 -0.487754,0.09796 -1.82347,4.62245 -1.985714,8.87143 -0.487756,12.743878 -3.287754,3.54796 -4.931632,7.844898 -4.931632,12.890816 0,2.604082 0.227552,4.988776 0.683674,7.153062 0.456122,2.164286 1.07449,4.020408 1.855102,5.566326 0.780612,1.545918 1.75,2.929592 2.905102,4.15 1.155102,1.220408 2.360204,2.213266 3.613264,2.978572 1.253062,0.766326 2.669388,1.42449 4.24796,1.97755 1.578572,0.554082 3.07551,0.976532 4.491836,1.27041 1.416328,0.292856 2.970408,0.521428 4.663266,0.683672 -2.669388,1.82347 -4.004082,4.720408 -4.004082,8.690816 v 7.639796 C 36.536734,89.818368 35.083674,89.3 33.656122,88.695918 c -4.99898,-2.115306 -9.490816,-5.143878 -13.35,-9.00306 -3.859184,-3.859184 -6.887754,-8.351022 -9.00306,-13.35 C 9.1163263,61.171428 8.0071428,55.67347 8.0071428,50 c 0,-5.67347 1.1091835,-11.171428 3.2969392,-16.342858 2.115306,-4.998978 5.143878,-9.490816 9.00306,-13.35 3.859184,-3.859182 8.351022,-6.887754 13.35,-9.00306 C 38.828572,9.1163266 44.32653,8.0071428 50,8.0071428 c 5.67347,0 11.171428,1.1091838 16.342858,3.2969392 5,2.115306 9.490816,5.143878 13.35,9.00306 3.859182,3.859184 6.887754,8.351022 9.00306,13.35 2.186736,5.17245 3.295918,10.67041 3.295918,16.342858 0,5.672448 -1.109182,11.171428 -3.296938,16.342858 -2.115306,4.998978 -5.143878,9.490816 -9.00204,13.35 l 0,0 z"></path></svg></a></li>
</ul>
  
  
  
<ul class="subscribe">
  <li><a href="https://twitter.com/jamielennox" rel="subscribe-twitter" title="@jamielennox on Twitter" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 512 512"><path class="social" d="M0.001,334.932c33.327,30.816,118.891,59.981,188.517-8.271c-12.52,1.955-22.972-0.416-30.913-8.269
  c-7.531-7.465-7.945-15.182-3.914-22.202c3.275-5.725,10.184-9.741,16.977-13.934c-12.323,2.285-22.829,1.095-32.218-3.706
  c-12.604-6.444-24.863-13.228-28.3-27.207c7.71-8.112,16.28-15.359,34.831-12.627c-17.45-5.83-33.087-13.429-44.41-24.815
  c-11.028-11.091-12.163-18.302-13.932-26.996c9.632-3.567,19.688-5.421,30.478-4.353c-24.397-12.476-34.757-29.63-40.487-48.325
  c-1.731-5.652-2.044-11.03-1.31-16.545c98.826,37.305,145.11,64.109,170.662,89.251c11.496-30.589,38.3-99.868,78.371-123.646
  c0.191,3.77-1.309,7.837-4.357,12.189c11.863-6.609,21.125-17.188,37.445-16.98c-1.879,7.723-7.279,13.904-17.85,17.854
  c10.662-4.084,21.463-7.545,32.65-9.578c10.375-1.881,10.229,6.304,4.355,10.444c-11.916,8.412-24.578,9.456-37.006,13.498
  c38.105,0.949,69.266,18.994,93.604,58.343c8.088,13.074,13.52,26.149,14.807,40.487c16.254,4.563,32.426,5.494,48.76,2.61
  c4.475-0.796,8.645-1.63,12.627-3.482c-6.354,9.529-13.686,17.356-23.947,20.899c-9.811,3.387-19.637,6.688-30.473,6.968
  c17.641,6.675,37.082,7.045,57.033,5.659c-24.402,23.486-43.08,22.922-61.824,22.642c-8.221,34.703-25.025,69.315-60.52,101.005
  c-46.559,41.569-96.678,61.397-148.457,65.742c-48.552,4.07-95.488,3.512-146.726-20.464
  C56.486,393.349,24.648,368.884,0.001,334.932L0.001,334.932z"/></svg></a></li>
</ul>
  
  
<ul class="subscribe">
  <li><a href="https://linkedin.com/in/jamielennox" rel="subscribe-linkedin" title="Jamie Lennox on LinkedIn" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 731 1000"><path class="social" d="M158.75 865l-156.25 0l0 -521.25l156.25 0l0 521.25zm393.75 -505q87.5 0 133.125 56.25t45.625 153.75l0 295l-156.25 0l0 -278.75q0 -108.75 -76.25 -108.75 -61.25 0 -80 61.25l0 326.25l-156.25 0q2.5 -468.75 0 -521.25l123.75 0l10 103.75l2.5 0q53.75 -87.5 153.75 -87.5zm-552.5 -146.25q0 -78.75 81.25 -78.75 80 0 80 78.75 0 77.5 -80 77.5 -81.25 0 -81.25 -77.5z"/></svg></a></li>
</ul>
  
  
  
  
  
  
  
    
      <form action="http://www.google.com" id="cse-search-box" target="_blank">
        <fieldset role="search">
          <input type="hidden" name="cx" value="018123390685303971820:jd6_chqq4_q" />
          <input type="hidden" name="ie" value="UTF-8" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Os-http</h1>
      
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-12T12:57:25+10:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>12:57 pm</span></time>
        
         | <a href="#disqus_thread">Comments</a>
        
        
      </p>
    
  </header>


<div class="entry-content"><h2>Background</h2>

<p>Frequently doing OpenStack development I find myself wanting to query an API directly and observe the response.
This is a fairly common development task, but it&rsquo;s more complicated in OpenStack because there is an order in which you are supposed to make calls.
The ideal flow is:</p>

<ul>
<li>authenticate using credentials (username/password or a range of other mechanisms)</li>
<li>use the service catalog returned with authentication to find the endpoint for a service</li>
<li>find the API version URL you want from the service&rsquo;s endpoint</li>
<li>make a request to the versioned URL</li>
</ul>


<p>So we generally end up simply using a combination of curl and <a href="https://stedolan.github.io/jq/">jq</a> against a known endpoint with an existing token.
This pattern has existed for so long that the <code>--debug</code> output of most clients is actually in curl command form.
There are numerous drawbacks to this approach including:</p>

<ul>
<li>you have to manually refresh tokens when they expire.</li>
<li>you have to know the endpoints ahead of time.</li>
<li>for security reasons the actual token is no longer displayed so you can&rsquo;t simply copy the outputted curl command.</li>
<li>you have to remember all the curl/other tool commands for showing headers, readable output etc - YMMV on this but I always forget.</li>
</ul>


<h2>Introducing os-http</h2>

<p>os-http is an easy to use CLI tool for making requests against OpenStack endpoints correctly.
It&rsquo;s designed to allow developers to debug and inspect the responses of OpenStack REST APIs without having to manage the details of authentication, service catalog and version negotiation.
Its interface is 100% modelled on the excellent <a href="https://github.com/jkbrzt/httpie">httpie</a>.</p>

<p>I have recently added the 0.1 release to <a href="https://pypi.python.org/pypi/os-http/">pypi</a> and the source is available <a href="https://github.com/jamielennox/os-http">on my github</a> though it will probably migrate to the OpenStack infrastructure if it gains adoption.
It is released under the Apache 2 License.</p>

<p>It is still very raw and but I have been using it for some time and feel it may be useful for others.
It is also in fairly desperate need of documentation - contributions welcome.</p>

<h2>Example</h2>

<p>Because it&rsquo;s powered by <a href="https://pypi.python.org/pypi/os-client-config">os-client-config</a> the authentication configuration is what you would expect from using <a href="https://pypi.python.org/pypi/python-openstackclient">openstackclient</a>.
Documentation for preparing this authentication is available from both of these projects.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">export OS_CLOUD=devstack</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are then a number of choices you can make for service discovery:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">--os-service-type &lt;name&gt;    Service type to request from the catalog</span>
</span><span class='line'><span class="go">--os-service-name &lt;name&gt;    Service name to request from the catalog</span>
</span><span class='line'><span class="go">--os-interface &lt;name&gt;       API Interface to use [public, internal, admin]</span>
</span><span class='line'><span class="go">--os-region-name &lt;name&gt;     Region of the cloud to use</span>
</span><span class='line'><span class="go">--os-endpoint-override &lt;url&gt;  Endpoint to use instead of the endpoint in the catalog</span>
</span><span class='line'><span class="go">--os-api-version &lt;version&gt;  Which version of the service API to use</span>
</span></code></pre></td></tr></table></div></figure>


<p>As is standard for OpenStack clients these options are also able to be set via the corresponding OS_ environment varibles:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">export OS_SERVICE_TYPE=image</span>
</span><span class='line'><span class="go">export OS_API_VERSION=2</span>
</span></code></pre></td></tr></table></div></figure>


<p>The syntax for commands is then <code>os-http METHOD PATH [ITEM [ITEM]]</code>.
 <code>ITEM</code> currently only accepts headers in a <code>key:value</code> format but will support others in future.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">jamie@devstack:~$</span> os-http get /images X-My-Header:Value
</span><span class='line'><span class="go">HTTP/1.1 200 OK</span>
</span><span class='line'><span class="go">Date: Tue, 12 Apr 2016 01:35:31 GMT</span>
</span><span class='line'><span class="go">Connection: keep-alive</span>
</span><span class='line'><span class="go">Content-Type: application/json; charset=UTF-8</span>
</span><span class='line'><span class="go">Content-Length: 1987</span>
</span><span class='line'><span class="go">X-Openstack-Request-Id: req-3f6e07e7-cd0d-4a90-9d8a-0024a4bc347f</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="go">{</span>
</span><span class='line'><span class="go">    &quot;first&quot;: &quot;/v2/images&quot;,</span>
</span><span class='line'><span class="go">    &quot;images&quot;: [</span>
</span><span class='line'><span class="go">        {</span>
</span><span class='line'><span class="go">            &quot;checksum&quot;: &quot;eb9139e4942121f22bbc2afc0400b2a4&quot;,</span>
</span><span class='line'><span class="go">            &quot;container_format&quot;: &quot;ami&quot;,</span>
</span><span class='line'><span class="go">            &quot;created_at&quot;: &quot;2016-03-08T01:56:59Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;disk_format&quot;: &quot;ami&quot;,</span>
</span><span class='line'><span class="go">            &quot;file&quot;: &quot;/v2/images/6c13a0e6-98a3-47fb-bee4-2e356668f7d9/file&quot;,</span>
</span><span class='line'><span class="go">            &quot;id&quot;: &quot;6c13a0e6-98a3-47fb-bee4-2e356668f7d9&quot;,</span>
</span><span class='line'><span class="go">            &quot;kernel_id&quot;: &quot;578a708b-d0de-4a28-bcd2-8627ad15a971&quot;,</span>
</span><span class='line'><span class="go">            &quot;min_disk&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;min_ram&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;name&quot;: &quot;cirros-0.3.4-x86_64-uec&quot;,</span>
</span><span class='line'><span class="go">            &quot;owner&quot;: &quot;1f04217930f34b4a92fb11457783f2c0&quot;,</span>
</span><span class='line'><span class="go">            &quot;protected&quot;: false,</span>
</span><span class='line'><span class="go">            &quot;ramdisk_id&quot;: &quot;0eaea69b-ebfd-40f3-bf86-13b8ad08462b&quot;,</span>
</span><span class='line'><span class="go">            &quot;schema&quot;: &quot;/v2/schemas/image&quot;,</span>
</span><span class='line'><span class="go">            &quot;self&quot;: &quot;/v2/images/6c13a0e6-98a3-47fb-bee4-2e356668f7d9&quot;,</span>
</span><span class='line'><span class="go">            &quot;size&quot;: 25165824,</span>
</span><span class='line'><span class="go">            &quot;status&quot;: &quot;active&quot;,</span>
</span><span class='line'><span class="go">            &quot;tags&quot;: [],</span>
</span><span class='line'><span class="go">            &quot;updated_at&quot;: &quot;2016-03-08T01:56:59Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;virtual_size&quot;: null,</span>
</span><span class='line'><span class="go">            &quot;visibility&quot;: &quot;public&quot;</span>
</span><span class='line'><span class="go">        },</span>
</span><span class='line'><span class="go">        {</span>
</span><span class='line'><span class="go">            &quot;checksum&quot;: &quot;be575a2b939972276ef675752936977f&quot;,</span>
</span><span class='line'><span class="go">            &quot;container_format&quot;: &quot;ari&quot;,</span>
</span><span class='line'><span class="go">            &quot;created_at&quot;: &quot;2016-03-08T01:56:57Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;disk_format&quot;: &quot;ari&quot;,</span>
</span><span class='line'><span class="go">            &quot;file&quot;: &quot;/v2/images/0eaea69b-ebfd-40f3-bf86-13b8ad08462b/file&quot;,</span>
</span><span class='line'><span class="go">            &quot;id&quot;: &quot;0eaea69b-ebfd-40f3-bf86-13b8ad08462b&quot;,</span>
</span><span class='line'><span class="go">            &quot;min_disk&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;min_ram&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;name&quot;: &quot;cirros-0.3.4-x86_64-uec-ramdisk&quot;,</span>
</span><span class='line'><span class="go">            &quot;owner&quot;: &quot;1f04217930f34b4a92fb11457783f2c0&quot;,</span>
</span><span class='line'><span class="go">            &quot;protected&quot;: false,</span>
</span><span class='line'><span class="go">            &quot;schema&quot;: &quot;/v2/schemas/image&quot;,</span>
</span><span class='line'><span class="go">            &quot;self&quot;: &quot;/v2/images/0eaea69b-ebfd-40f3-bf86-13b8ad08462b&quot;,</span>
</span><span class='line'><span class="go">            &quot;size&quot;: 3740163,</span>
</span><span class='line'><span class="go">            &quot;status&quot;: &quot;active&quot;,</span>
</span><span class='line'><span class="go">            &quot;tags&quot;: [],</span>
</span><span class='line'><span class="go">            &quot;updated_at&quot;: &quot;2016-03-08T01:56:57Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;virtual_size&quot;: null,</span>
</span><span class='line'><span class="go">            &quot;visibility&quot;: &quot;public&quot;</span>
</span><span class='line'><span class="go">        },</span>
</span><span class='line'><span class="go">        {</span>
</span><span class='line'><span class="go">            &quot;checksum&quot;: &quot;8a40c862b5735975d82605c1dd395796&quot;,</span>
</span><span class='line'><span class="go">            &quot;container_format&quot;: &quot;aki&quot;,</span>
</span><span class='line'><span class="go">            &quot;created_at&quot;: &quot;2016-03-08T01:56:54Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;disk_format&quot;: &quot;aki&quot;,</span>
</span><span class='line'><span class="go">            &quot;file&quot;: &quot;/v2/images/578a708b-d0de-4a28-bcd2-8627ad15a971/file&quot;,</span>
</span><span class='line'><span class="go">            &quot;id&quot;: &quot;578a708b-d0de-4a28-bcd2-8627ad15a971&quot;,</span>
</span><span class='line'><span class="go">            &quot;min_disk&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;min_ram&quot;: 0,</span>
</span><span class='line'><span class="go">            &quot;name&quot;: &quot;cirros-0.3.4-x86_64-uec-kernel&quot;,</span>
</span><span class='line'><span class="go">            &quot;owner&quot;: &quot;1f04217930f34b4a92fb11457783f2c0&quot;,</span>
</span><span class='line'><span class="go">            &quot;protected&quot;: false,</span>
</span><span class='line'><span class="go">            &quot;schema&quot;: &quot;/v2/schemas/image&quot;,</span>
</span><span class='line'><span class="go">            &quot;self&quot;: &quot;/v2/images/578a708b-d0de-4a28-bcd2-8627ad15a971&quot;,</span>
</span><span class='line'><span class="go">            &quot;size&quot;: 4979632,</span>
</span><span class='line'><span class="go">            &quot;status&quot;: &quot;active&quot;,</span>
</span><span class='line'><span class="go">            &quot;tags&quot;: [],</span>
</span><span class='line'><span class="go">            &quot;updated_at&quot;: &quot;2016-03-08T01:56:55Z&quot;,</span>
</span><span class='line'><span class="go">            &quot;virtual_size&quot;: null,</span>
</span><span class='line'><span class="go">            &quot;visibility&quot;: &quot;public&quot;</span>
</span><span class='line'><span class="go">        }</span>
</span><span class='line'><span class="go">    ],</span>
</span><span class='line'><span class="go">    &quot;schema&quot;: &quot;/v2/schemas/images&quot;</span>
</span><span class='line'><span class="go">}</span>
</span></code></pre></td></tr></table></div></figure>


<p> <code>X-My-Header:Value</code> is purely for demonstration purposes and is ignored by glance.
As you can see the output is nicely formatted and in a console even includes some pygments magic for coloring.</p>

<h2>Caveats</h2>

<p>os-http is at version 0.1 and has many unimplemented or not quite right things.
Most notably:</p>

<ul>
<li><p>There is really only support for GET and other body-less requests.
Whilst you can specify PUT/POST or other to method there is currently no means to specify body data so the request will be empty.
This would be easy to add but I havent used it so I haven&rsquo;t implemented it - contributions welcome.</p></li>
<li><p>The output is intended to be easy for a developer to consume, not for a script to parse (though this may be considered in future).
It is not intended to be a replacement for the existing CLIs in scripts.
The default output may change to include any additional information that could be useful to developers.</p></li>
<li><p>Because os-http does requests &lsquo;correctly&rsquo; you may find that using &ndash;os-api-version gives errors - particularly with nova.
This is because for most installations the service catalog for nova points to a protected endpoint.
There is ongoing work upstream to fix the service catalog in general but for now os-http doesn&rsquo;t contain the hacks that clients do to work around poor setups.
Using this tool may lead you to discover just how many hacks there are.</p></li>
</ul>


<p>Please test it out and report any feedback or bugs.</p>
</div>


  <footer>
    <p class="meta">
      
  


  


  <span class="byline author vcard">Authored by <span class="fn">
  
    <a href="https://plus.google.com/101987113257988189539" rel="author">Jamie Lennox</a>
  
  </span></span>


      




<time class='entry-date' datetime='2016-04-12T12:57:25+10:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>12:57 pm</span></time>
      <span class="categories">full history <a href="https://github.com/jamielennox/jamielennox.github.io/commits/source/source/_posts/2016-04-12-os-http.markdown">here</a></span>

      

<span class="categories">
  
    <a class='category' href='/blog/categories/openstack/'>openstack</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/09/10/user-auth-in-openstack-services/" title="Previous Post: User auth in OpenStack services">&laquo; User auth in OpenStack services</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/07/13/the-positional-library/" title="Next Post: The Positional Library">The Positional Library &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Jamie Lennox -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jamielennox';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.jamielennox.net/blog/2016/04/12/os-http/';
        var disqus_url = 'http://www.jamielennox.net/blog/2016/04/12/os-http/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>














</body>
</html>
